extends layout

block content

  input#str_id(type="hidden",value=str_id)
  .container
    .row  
      .col-3.lead String Voltage: 
        span#vaSum(style="font-weight:700;")
        span.ms-1 v
      .col-4.lead Cell Voltage Ave: 
        span#vaAve(style="font-weight:700;")
        span.ms-1 v
      hr
  .container

    .row.border.border-primary.strrow.ms-1()
      .col-2
        table.maxmin(class="table-bordered caption-top")
          caption= "Maximum Voltages"
          th Cell  
          th Volts

          - var row = 0
          while (row < 10)
            tr(id="vaMaxRow" + row)
              td(id="vaMaxKey" + row)
              td(id="vaMaxVal" + row) &nbsp;
              - row++
        table.maxminnum
          tr
            td High Volt Cells
            td#vaNumHigh
            td 

      .col-3
        table.maxmin.table-bordered.caption-top()
          caption= "Minimum Voltages"
          th Tray 
          th Volts

          - var row = 0
          while (row < 10)
            tr(id="vaMinRow" + row)
              td(id="vaMinKey" + row)
              td(id="vaMinVal" + row) &nbsp;
              - row++
        table.maxminnum
          tr
            td Low Voltage Cells
            td#vaNumLow 
            td

      .col-7
        table(class="table-bordered caption-top traytbl", style="width:400px")
          caption Aux Cell Voltages
          - var cols = 10
          - var rows = 19
          - var row_cnt = 0
          - var cell_cnt = 0
          - var cells = 186
          while (row_cnt++ < rows)
            tr
              - var col_cnt = 0
              while (col_cnt++ < cols)
                if (cell_cnt++ < cells)
                  td.cfs(id="va" + cell_cnt, title="va" + cell_cnt) #{cell_cnt} 
                else
                  td
        include includes/spVoltsAux.pug

    .row.border.border-primary.strrow.ms-1.mt-2()
      .col-4
        .caption Aux Current amps
        table(class="table-bordered caption-top")
            tr
              td.cfs(id="i_aux", title="i_aux", width="40px", style="background-color:white;")  1
      .col-3
        .caption Aux Cell Temperatures °F
        table(class="table-bordered caption-top")
            tr
              td.cfs(id="aux_cell_temp_1", title="aux_cell_temp_1", width="40px")  1
              td.cfs(id="aux_cell_temp_2", title="aux_cell_temp_2", width="40px")  2
              td.cfs(id="aux_cell_temp_3", title="aux_cell_temp_3", width="40px")  3
              td.cfs(id="aux_cell_temp_4", title="aux_cell_temp_4", width="40px")  4
      .col-3 
        .caption Aux Ambient Temperatures °F
        table.mb-1(class="table-bordered caption-top")
            tr
              td.cfs(id="aux_amb_temp_1", title="aux_amb_temp_1", width="40px")  1
              td.cfs(id="aux_amb_temp_2", title="aux_amb_temp_2", width="40px")  2
    
    .row.border.border-primary.strrow.ms-1.mt-2.mb-4()
      .col-4
      .col-4
        .form-group(style="margin-top:10px; margin-bottom:10px;")
          //- button.spSubmit.btn.btn-primary.btn-sm() Set
          label() Aux Temperature Setpoint High
          input#spHighTempAux.spVal(size="2")
    .row
      .col
      .col
      .col

  script.
    $( document ).ready( () => {
      getSetPoints()

      data_xhr = get_aux_data
      data_xhr()
      
      //document.getElementById("aux").classList.add("active");
    })